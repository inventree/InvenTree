import{r as i,i as a,j as r}from"./vendor-C9xuDR-n.js";import{b as D,u as L,a as S,A as w}from"./UseForm-D7tPXWOh.js";import{u as F,R as I,J as R,a as E,I as j}from"./InvenTreeTable-8QCr5F7I.js";import{b as M,e as T}from"./index-CjCZvRJF.js";import{a as f}from"./formatters-BZ1ASghj.js";import{e as k}from"./CommonForms-C8SCGkHN.js";import{D as g,i as v,N as K,L as N}from"./ColumnRenderers-Bk0OcEIT.js";function Y({endpoint:o,orderId:m,orderDetailRefresh:c,currency:x,role:t}){const n=F("extra-line-item"),s=M(),A=i.useMemo(()=>[{accessor:"reference",switchable:!1},g({}),v({accessor:"quantity",switchable:!1}),{accessor:"price",title:a._({id:"vWelsN"}),render:e=>f(e.price,{currency:e.price_currency})},{accessor:"total_price",title:a._({id:"KyZVKD"}),render:e=>f(e.price,{currency:e.price_currency,multiplier:e.quantity})},K({accessor:"notes"}),N({accessor:"link"})],[]),[h,u]=i.useState({}),[p,d]=i.useState(0),l=D({url:o,title:a._({id:"pwb7Yo"}),fields:k(),initialData:{...h,price_currency:x},onFormSuccess:c,table:n}),C=L({url:o,pk:p,title:a._({id:"vgosWS"}),fields:k(),onFormSuccess:c,table:n}),b=S({url:o,pk:p,title:a._({id:"tpKh8C"}),onFormSuccess:c,table:n}),_=i.useCallback(e=>[I({hidden:!s.hasChangeRole(t),onClick:()=>{d(e.pk),C.open()}}),R({hidden:!s.hasAddRole(t),onClick:()=>{u({...e}),l.open()}}),E({hidden:!s.hasDeleteRole(t),onClick:()=>{d(e.pk),b.open()}})],[s,t]),y=i.useMemo(()=>[r.jsx(w,{tooltip:a._({id:"xnxWkO"}),hidden:!s.hasAddRole(t),onClick:()=>{u({order:m}),l.open()}},"add-line-item")],[s,t]);return r.jsxs(r.Fragment,{children:[l.modal,C.modal,b.modal,r.jsx(j,{tableState:n,url:T(o),columns:A,props:{params:{order:m},rowActions:_,tableActions:y}})]})}export{Y as E};
//# sourceMappingURL=ExtraLineItemTable-DSsef0ak.js.map
