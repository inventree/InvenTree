import{r as o,j as e,F as k,dd as R,cz as S,bQ as y,i as r,S as j,bR as c,bW as A,A as h,G as f,B as C,ee as B,c2 as E,H as T}from"./vendor-C9xuDR-n.js";import{Q as _}from"./browser-CreoRYY6.js";import{f as q,a as g,e as m,A as p,i as w}from"./index-CjCZvRJF.js";import{C as H,r as Q,w as I}from"./ThemeContext-s5vo4YrD.js";const M=({data:s,ecl:a="Q",margin:t=1})=>{const[i,l]=o.useState();return o.useEffect(()=>{if(!s)return l(void 0);_.toString(s,{errorCorrectionLevel:a,type:"svg",margin:t}).then(n=>{l(`data:image/svg+xml;utf8,${encodeURIComponent(n)}`)})},[s,a]),e.jsx(k,{children:i?e.jsx(R,{src:i,alt:"QR Code"}):e.jsx(S,{height:500})})},O=({mdl_prop:s,showEclSelector:a=!0,ecl:t="Q",...i})=>{const l=q(),[n,d]=o.useState(t);o.useEffect(()=>{t&&d(t)},[t]);const{data:x}=y({queryKey:["qr-code",s.model,s.pk],queryFn:async()=>g.post(m(p.barcode_generate),{model:s.model,pk:s.pk}).then(u=>{var b;return((b=u.data)==null?void 0:b.barcode)??""}).catch(u=>"")}),v=o.useMemo(()=>[{value:"L",label:r._({id:"vAoQxm"})},{value:"M",label:r._({id:"xuqOBP"})},{value:"Q",label:r._({id:"cxfKe+"})},{value:"H",label:r._({id:"rgHRyZ"})}],[]);return e.jsxs(j,{children:[e.jsx(c,{}),s.hash?e.jsx(A,{variant:"outline",color:"red",title:r._({id:"/FLHWb"}),children:e.jsx(h,{id:"AjTb8p"})}):null,e.jsx(M,{data:x,ecl:n,...i}),e.jsx(c,{}),x&&l.getSetting("BARCODE_SHOW_TEXT","false")&&e.jsxs(f,{justify:a?"space-between":"center",align:"flex-start",px:16,children:[e.jsxs(j,{gap:4,pt:2,children:[e.jsx(C,{size:"sm",fw:500,children:e.jsx(h,{id:"vDT9iq"})}),e.jsxs(f,{children:[e.jsx(B,{children:x}),e.jsx(H,{value:x})]})]}),a&&e.jsx(E,{allowDeselect:!1,label:r._({id:"md4cw+"}),value:n,onChange:u=>d(u),data:v})]})]})},z=({mdl_prop:s})=>{const[a,t]=o.useState(""),i=o.useCallback(l=>{g.post(m(p.barcode_link),{[s.model]:s.pk,barcode:l}).then(n=>{t(""),Q.closeAll(),location.reload()}).catch(n=>{const d=w({error:n,field:"error",defaultMessage:r._({id:"59QdRH"})});t(d)})},[]);return e.jsxs(j,{gap:"xs",children:[e.jsx(c,{}),e.jsx(I,{onScan:i,actionText:r._({id:"yzF66j"}),error:a})]})},U=({mdl_prop:s})=>{function a(){g.post(m(p.barcode_unlink),{[s.model]:s.pk}).then(t=>{Q.closeAll(),location.reload()})}return e.jsx(k,{children:e.jsxs(j,{gap:"sm",children:[e.jsx(c,{}),e.jsx(C,{children:e.jsx(h,{id:"GZnnMw"})}),e.jsx(c,{}),e.jsx(f,{grow:!0,children:e.jsx(T,{color:"red",onClick:a,children:e.jsx(h,{id:"ut1J8k"})})})]})})};export{O as I,z as Q,U as a,M as b};
//# sourceMappingURL=QRCode-P5tCv9DA.js.map
