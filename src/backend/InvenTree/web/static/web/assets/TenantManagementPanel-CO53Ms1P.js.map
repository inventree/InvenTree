{"version":3,"file":"TenantManagementPanel-CO53Ms1P.js","sources":["../../../../../../frontend/src/forms/TenantForms.tsx","../../../../../../frontend/src/tables/settings/TenantTable.tsx","../../../../../../frontend/src/pages/Index/Settings/AdminCenter/TenantManagementPanel.tsx"],"sourcesContent":["import { t } from '@lingui/core/macro';\nimport { useMemo } from 'react';\n\nimport type { ApiFormFieldSet } from '@lib/types/Forms';\n\n/**\n * Construct a set of fields for creating / editing a Tenant instance\n */\nexport function tenantFields(): ApiFormFieldSet {\n  return useMemo(() => {\n    const fields: ApiFormFieldSet = {\n      name: {\n        field_type: 'string',\n        required: true,\n        description: t`Unique name for the tenant`\n      },\n      description: {\n        field_type: 'string',\n        description: t`Optional description of the tenant`\n      },\n      code: {\n        field_type: 'string',\n        description: t`Optional unique code/identifier for the tenant`\n      },\n      is_active: {\n        field_type: 'boolean',\n        description: t`Whether this tenant is currently active`\n      },\n      contact_name: {\n        field_type: 'string',\n        description: t`Optional contact person name`\n      },\n      contact_email: {\n        field_type: 'string',\n        description: t`Optional contact email`\n      },\n      contact_phone: {\n        field_type: 'string',\n        description: t`Optional contact phone number`\n      }\n    };\n\n    return fields;\n  }, []);\n}\n","import { t } from '@lingui/core/macro';\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { AddItemButton } from '@lib/components/AddItemButton';\nimport { RowDeleteAction, RowEditAction } from '@lib/components/RowActions';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { apiUrl } from '@lib/functions/Api';\nimport type { RowAction, TableColumn } from '@lib/types/Tables';\nimport { tenantFields } from '../../forms/TenantForms';\nimport {\n  useCreateApiFormModal,\n  useDeleteApiFormModal,\n  useEditApiFormModal\n} from '../../hooks/UseForm';\nimport { useTable } from '../../hooks/UseTable';\nimport { useUserState } from '../../states/UserState';\nimport { BooleanColumn } from '../ColumnRenderers';\nimport { InvenTreeTable } from '../InvenTreeTable';\n\n/**\n * Table for displaying list of tenants\n */\nexport default function TenantTable() {\n  const table = useTable('tenants');\n\n  const user = useUserState();\n\n  const columns: TableColumn[] = useMemo(() => {\n    return [\n      {\n        accessor: 'name',\n        sortable: true,\n        title: t`Name`\n      },\n      {\n        accessor: 'code',\n        sortable: true,\n        title: t`Code`\n      },\n      {\n        accessor: 'description',\n        sortable: false,\n        title: t`Description`\n      },\n      BooleanColumn({\n        accessor: 'is_active',\n        title: t`Active`\n      }),\n      {\n        accessor: 'contact_name',\n        sortable: false,\n        title: t`Contact Name`\n      },\n      {\n        accessor: 'contact_email',\n        sortable: false,\n        title: t`Contact Email`\n      },\n      {\n        accessor: 'contact_phone',\n        sortable: false,\n        title: t`Contact Phone`\n      }\n    ];\n  }, []);\n\n  const newTenant = useCreateApiFormModal({\n    url: ApiEndpoints.tenant_list,\n    title: t`Add Tenant`,\n    fields: tenantFields(),\n    table: table\n  });\n\n  const [selectedTenant, setSelectedTenant] = useState<number | undefined>(\n    undefined\n  );\n\n  const editTenant = useEditApiFormModal({\n    url: ApiEndpoints.tenant_list,\n    pk: selectedTenant,\n    title: t`Edit Tenant`,\n    fields: tenantFields(),\n    table: table\n  });\n\n  const deleteTenant = useDeleteApiFormModal({\n    url: ApiEndpoints.tenant_list,\n    pk: selectedTenant,\n    title: t`Delete Tenant`,\n    table: table\n  });\n\n  const rowActions = useCallback(\n    (record: any): RowAction[] => {\n      return [\n        RowEditAction({\n          hidden: !user.hasChangeRole(UserRoles.admin),\n          onClick: () => {\n            setSelectedTenant(record.pk);\n            editTenant.open();\n          }\n        }),\n        RowDeleteAction({\n          hidden: !user.hasDeleteRole(UserRoles.admin),\n          onClick: () => {\n            setSelectedTenant(record.pk);\n            deleteTenant.open();\n          }\n        })\n      ];\n    },\n    [user, editTenant, deleteTenant]\n  );\n\n  const tableActions = useMemo(() => {\n    return [\n      <AddItemButton\n        key='add'\n        onClick={() => newTenant.open()}\n        tooltip={t`Add tenant`}\n        hidden={!user.hasAddRole(UserRoles.admin)}\n      />\n    ];\n  }, [user, newTenant]);\n\n  return (\n    <>\n      {newTenant.modal}\n      {editTenant.modal}\n      {deleteTenant.modal}\n      <InvenTreeTable\n        url={apiUrl(ApiEndpoints.tenant_list)}\n        tableState={table}\n        columns={columns}\n        props={{\n          rowActions: rowActions,\n          tableActions: tableActions,\n          enableSelection: true,\n          enableSearch: true,\n          enableFilters: true,\n          enablePagination: true,\n          enableColumnSwitching: true\n        }}\n      />\n    </>\n  );\n}\n","import { t } from '@lingui/core/macro';\nimport { Stack } from '@mantine/core';\n\nimport { StylishText } from '../../../../components/items/StylishText';\nimport TenantTable from '../../../../tables/settings/TenantTable';\n\nexport default function TenantManagementPanel() {\n  return (\n    <Stack gap='xs'>\n      <StylishText size='lg'>{t`Tenants`}</StylishText>\n      <TenantTable />\n    </Stack>\n  );\n}\n"],"names":["tenantFields","useMemo","name","field_type","required","description","_i18n","_","id","code","is_active","contact_name","contact_email","contact_phone","TenantTable","table","useTable","user","useUserState","columns","accessor","sortable","title","BooleanColumn","newTenant","useCreateApiFormModal","url","ApiEndpoints","tenant_list","fields","selectedTenant","setSelectedTenant","useState","undefined","editTenant","useEditApiFormModal","pk","deleteTenant","useDeleteApiFormModal","rowActions","useCallback","record","RowEditAction","hidden","hasChangeRole","UserRoles","admin","onClick","open","RowDeleteAction","hasDeleteRole","tableActions","AddItemButton","hasAddRole","jsxs","Fragment","modal","jsx","InvenTreeTable","apiUrl","enableSelection","enableSearch","enableFilters","enablePagination","enableColumnSwitching","TenantManagementPanel","Stack","StylishText"],"mappings":"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"}
