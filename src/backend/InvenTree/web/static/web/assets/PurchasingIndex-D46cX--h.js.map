{"version":3,"file":"PurchasingIndex-D46cX--h.js","sources":["../../../../../../frontend/src/pages/purchasing/PurchasingIndex.tsx"],"sourcesContent":["import { t } from '@lingui/core/macro';\nimport { Stack } from '@mantine/core';\nimport {\n  IconBuildingFactory2,\n  IconBuildingStore,\n  IconBuildingWarehouse,\n  IconCalendar,\n  IconPackageExport,\n  IconShoppingCart,\n  IconTable\n} from '@tabler/icons-react';\nimport { useMemo } from 'react';\n\nimport { ModelType } from '@lib/enums/ModelType';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { useLocalStorage } from '@mantine/hooks';\nimport SegmentedIconControl from '../../components/buttons/SegmentedIconControl';\nimport OrderCalendar from '../../components/calendar/OrderCalendar';\nimport PermissionDenied from '../../components/errors/PermissionDenied';\nimport { PageDetail } from '../../components/nav/PageDetail';\nimport { PanelGroup } from '../../components/panels/PanelGroup';\nimport { useUserState } from '../../states/UserState';\nimport { CompanyTable } from '../../tables/company/CompanyTable';\nimport { ManufacturerPartTable } from '../../tables/purchasing/ManufacturerPartTable';\nimport { PurchaseOrderTable } from '../../tables/purchasing/PurchaseOrderTable';\nimport { SupplierPartTable } from '../../tables/purchasing/SupplierPartTable';\n\nfunction PurchaseOrderOverview({\n  view\n}: {\n  view: string;\n}) {\n  switch (view) {\n    case 'calendar':\n      return (\n        <OrderCalendar\n          model={ModelType.purchaseorder}\n          role={UserRoles.purchase_order}\n          params={{ outstanding: true }}\n        />\n      );\n    case 'table':\n    default:\n      return <PurchaseOrderTable />;\n  }\n}\n\nexport default function PurchasingIndex() {\n  const user = useUserState();\n\n  const [purchaseOrderView, setpurchaseOrderView] = useLocalStorage<string>({\n    key: 'purchaseOrderView',\n    defaultValue: 'table'\n  });\n\n  const panels = useMemo(() => {\n    return [\n      {\n        name: 'purchaseorders',\n        label: t`Purchase Orders`,\n        icon: <IconShoppingCart />,\n        hidden: !user.hasViewRole(UserRoles.purchase_order),\n        content: <PurchaseOrderOverview view={purchaseOrderView} />,\n        controls: (\n          <SegmentedIconControl\n            value={purchaseOrderView}\n            onChange={setpurchaseOrderView}\n            data={[\n              { value: 'table', label: t`Table View`, icon: <IconTable /> },\n              {\n                value: 'calendar',\n                label: t`Calendar View`,\n                icon: <IconCalendar />\n              }\n            ]}\n          />\n        )\n      },\n      {\n        name: 'suppliers',\n        label: t`Suppliers`,\n        icon: <IconBuildingStore />,\n        content: (\n          <CompanyTable\n            path='purchasing/supplier'\n            params={{ is_supplier: true }}\n          />\n        )\n      },\n      {\n        name: 'supplier-parts',\n        label: t`Supplier Parts`,\n        icon: <IconPackageExport />,\n        content: <SupplierPartTable params={{}} />\n      },\n      {\n        name: 'manufacturer',\n        label: t`Manufacturers`,\n        icon: <IconBuildingFactory2 />,\n        content: (\n          <CompanyTable\n            path='purchasing/manufacturer'\n            params={{ is_manufacturer: true }}\n          />\n        )\n      },\n      {\n        name: 'manufacturer-parts',\n        label: t`Manufacturer Parts`,\n        icon: <IconBuildingWarehouse />,\n        content: <ManufacturerPartTable params={{}} />\n      }\n    ];\n  }, [user, purchaseOrderView]);\n\n  if (!user.isLoggedIn() || !user.hasViewRole(UserRoles.purchase_order)) {\n    return <PermissionDenied />;\n  }\n\n  return (\n    <Stack>\n      <PageDetail title={t`Purchasing`} />\n      <PanelGroup\n        pageKey='purchasing-index'\n        panels={panels}\n        model={'purchasing'}\n        id={null}\n      />\n    </Stack>\n  );\n}\n"],"names":["PurchaseOrderOverview","view","jsx","OrderCalendar","ModelType","purchaseorder","UserRoles","purchase_order","outstanding","PurchaseOrderTable","PurchasingIndex","user","useUserState","purchaseOrderView","setpurchaseOrderView","useLocalStorage","key","defaultValue","panels","useMemo","name","label","_i18n","_","id","icon","IconShoppingCart","hidden","hasViewRole","content","controls","SegmentedIconControl","value","IconTable","IconCalendar","IconBuildingStore","CompanyTable","is_supplier","IconPackageExport","SupplierPartTable","IconBuildingFactory2","is_manufacturer","IconBuildingWarehouse","ManufacturerPartTable","isLoggedIn","PermissionDenied","Stack","PageDetail","PanelGroup"],"mappings":"stCA2BA,SAASA,EAAsB,CAC7BC,KAAAA,CAGF,EAAG,CACD,OAAQA,EAAAA,CACN,IAAK,WACH,OACEC,EAAAA,IAACC,GACC,MAAOC,EAAUC,cACjB,KAAMC,EAAUC,eAChB,OAAQ,CAAEC,YAAa,EAAA,EAAO,EAGpC,IAAK,QACL,QACE,aAAQC,EAAA,EAAkB,CAAA,CAEhC,CAEA,SAAwBC,IAAkB,CACxC,MAAMC,EAAOC,EAAAA,EAEP,CAACC,EAAmBC,CAAoB,EAAIC,EAAwB,CACxEC,IAAK,oBACLC,aAAc,OAAA,CACf,EAEKC,EAASC,EAAAA,QAAQ,IACd,CACL,CACEC,KAAM,iBACNC,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAiB,EACxBC,WAAOC,EAAA,EAAgB,EACvBC,OAAQ,CAAChB,EAAKiB,YAAYtB,EAAUC,cAAc,EAClDsB,QAAS3B,EAAAA,IAACF,EAAA,CAAsB,KAAMa,CAAAA,CAAkB,EACxDiB,eACGC,EAAA,CACC,MAAOlB,EACP,SAAUC,EACV,KAAM,CACJ,CAAEkB,MAAO,QAASX,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAY,EAAGC,WAAOQ,EAAA,CAAA,CAAS,CAAA,EACxD,CACED,MAAO,WACPX,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAe,EACtBC,WAAOS,EAAA,CAAA,CAAY,CAAA,CACpB,CAAA,CACD,CAAA,EAIR,CACEd,KAAM,YACNC,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAW,EAClBC,WAAOU,EAAA,EAAiB,EACxBN,QACE3B,EAAAA,IAACkC,EAAA,CACC,KAAK,sBACL,OAAQ,CAAEC,YAAa,EAAA,CAAK,CAAE,CAAA,EAIpC,CACEjB,KAAM,iBACNC,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAgB,EACvBC,WAAOa,EAAA,EAAiB,EACxBT,QAAS3B,EAAAA,IAACqC,EAAA,CAAkB,OAAQ,CAAA,CAAC,CAAE,CAAA,EAEzC,CACEnB,KAAM,eACNC,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAe,EACtBC,WAAOe,EAAA,EAAoB,EAC3BX,QACE3B,EAAAA,IAACkC,EAAA,CACC,KAAK,0BACL,OAAQ,CAAEK,gBAAiB,EAAA,CAAK,CAAE,CAAA,EAIxC,CACErB,KAAM,qBACNC,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAoB,EAC3BC,WAAOiB,EAAA,EAAqB,EAC5Bb,QAAS3B,EAAAA,IAACyC,EAAA,CAAsB,OAAQ,CAAA,CAAC,CAAE,CAAA,CAC5C,EAEF,CAAChC,EAAME,CAAiB,CAAC,EAE5B,MAAI,CAACF,EAAKiC,cAAgB,CAACjC,EAAKiB,YAAYtB,EAAUC,cAAc,QAC1DsC,EAAA,EAAgB,SAIvBC,EAAA,CACC,SAAA,CAAA5C,EAAAA,IAAC6C,EAAA,CAAW,MAAMzB,EAAAC,EAAC,CAAAC,GAAA,QAAA,CAAY,EAAE,EACjCtB,MAAC8C,GACC,QAAQ,mBACR,OAAA9B,EACA,MAAO,aACP,GAAI,IAAA,CAAK,CAAA,EAEb,CAEJ"}
