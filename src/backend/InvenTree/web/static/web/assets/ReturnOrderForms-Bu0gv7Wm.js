import{r as d,i as a,j as i,ef as f,eg as p,ap as x,aL as _,ah as h,bS as u,cH as j}from"./vendor-C9xuDR-n.js";import{e as y,A as b,f as g,m as v}from"./index-CjCZvRJF.js";import{R as F}from"./RemoveRowButton-Bs8592YI.js";import{b as R,T as S,S as T}from"./UseForm-D7tPXWOh.js";import{p as k}from"./InvenTreeTable-8QCr5F7I.js";function L({duplicateOrderId:e}){const t=g();return d.useMemo(()=>{const s={reference:{},description:{},customer:{disabled:e!=null,filters:{is_customer:!0,active:!0}},customer_reference:{},project_code:{},tenant:{icon:i.jsx(h,{}),filters:{is_active:!0},required:!0},order_currency:{},start_date:{icon:i.jsx(_,{})},target_date:{icon:i.jsx(_,{})},link:{},contact:{icon:i.jsx(x,{}),adjustFilters:r=>({...r.filters,company:r.data.customer})},address:{icon:i.jsx(p,{}),adjustFilters:r=>({...r.filters,company:r.data.customer})},responsible:{filters:{is_active:!0},icon:i.jsx(f,{})}};return e&&(s.duplicate={children:{order_id:{hidden:!0,value:e},copy_lines:{value:!1,hidden:!0},copy_extra_lines:{}}}),t.isSet("PROJECT_CODES_ENABLED",!0)||delete s.project_code,s},[e,t])}function O({orderId:e,customerId:t,create:s}){return d.useMemo(()=>({order:{disabled:!0,filters:{customer_detail:!0}},item:{filters:{customer:t,part_detail:!0}},quantity:{},reference:{},outcome:{hidden:s==!0},price:{},price_currency:{},target_date:{},notes:{},link:{}}),[s,e,t])}function q({props:e,record:t}){var o,l,c;const s=d.useMemo(()=>{var n;return((n=k(v.stockitem)())==null?void 0:n.map(m=>({value:m.value,display_name:m.label})))??[]},[]),r=d.useMemo(()=>{var n;return(n=t.item_detail)!=null&&n.serial&&t.quantity==1?`# ${t.item_detail.serial}`:t.quantity},[t.quantity,t.item_detail]);return i.jsxs(u.Tr,{children:[i.jsx(u.Td,{children:i.jsxs(j,{gap:"sm",align:"center",children:[i.jsx(S,{size:40,src:t.part_detail.thumbnail,align:"center"}),i.jsx("div",{children:t.part_detail.name})]})}),i.jsx(u.Td,{children:r}),i.jsx(u.Td,{children:i.jsx(T,{fieldDefinition:{field_type:"choice",label:a._({id:"uAQUqI"}),choices:s,onValueChange:n=>{e.changeFn(e.idx,"status",n)}},defaultValue:(o=t.item_detail)==null?void 0:o.status,error:(c=(l=e.rowErrors)==null?void 0:l.status)==null?void 0:c.message})}),i.jsx(u.Td,{children:i.jsx(F,{onClick:()=>e.removeFn(e.idx)})})]})}function U(e){const t={id:{value:e.orderId,hidden:!0},items:{field_type:"table",value:e.items.map(s=>({item:s.pk})),modelRenderer:s=>{const r=e.items.find(o=>{var l;return o.pk==((l=s==null?void 0:s.item)==null?void 0:l.item)});return i.jsx(q,{props:s,record:r},r.pk)},headers:[{title:a._({id:"vgP+9p"}),style:{minWidth:"250px"}},{title:a._({id:"VbWX2u"}),style:{minWidth:"250px"}},{title:a._({id:"uAQUqI"}),style:{minWidth:"250px"}},{title:"",style:{width:"50px"}}]},location:{filters:{structural:!1}}};return R({url:y(b.return_order_receive,e.orderId),title:a._({id:"iwAbO1"}),fields:t,initialData:{location:null},size:"80%",onFormSuccess:e.onFormSuccess,successMessage:a._({id:"9U/ZsL"})})}export{O as a,U as b,L as u};
//# sourceMappingURL=ReturnOrderForms-Bu0gv7Wm.js.map
