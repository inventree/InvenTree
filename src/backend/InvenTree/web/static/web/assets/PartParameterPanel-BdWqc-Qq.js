import{r as l,i,j as t,bQ as m,bW as c}from"./vendor-c9tu_e1b.js";import{S as C}from"./ThemeContext-CVPHi9Q7.js";import{b as v,u as A,a as R,A as w,S as f}from"./UseForm-21BEg7Md.js";import{u as F,R as S,Z as B,a as T,I as M}from"./InvenTreeTable-_nPJoCLK.js";import{b as D,A as r,U as p,e as P}from"./index-C-YqHYR0.js";import{D as q,B as k}from"./ColumnRenderers-6-W27ey5.js";import{R as E}from"./RemoveRowButton-0iZczeVG.js";import"./DesktopAppView-Bg1vO8uy.js";import"./ActionButton-Cn3lAMG1.js";import"./index-D1sX3jYA.js";import"./QRCode-4MaRh6JQ.js";import"./browser-oJrDmCBJ.js";import"./YesNoButton-BdKeJbQO.js";import"./formatters-1-K9MQML.js";function N(){const e=F("part-parameter-templates"),s=D(),h=l.useMemo(()=>[{name:"checkbox",label:i._({id:"G1XxbZ"}),description:i._({id:"jaUfxb"})},{name:"has_choices",label:i._({id:"dBda4v"}),description:i._({id:"f1PxeH"})},{name:"has_units",label:i._({id:"YyRdJQ"}),description:i._({id:"jJ6ck0"})}],[]),d=l.useMemo(()=>[{accessor:"name",sortable:!0,switchable:!1},{accessor:"parts",sortable:!0,switchable:!0},{accessor:"units",sortable:!0},q({}),k({accessor:"checkbox"}),{accessor:"choices"}],[]),n=l.useMemo(()=>({name:{},description:{},units:{},choices:{},checkbox:{},selectionlist:{}}),[]),a=v({url:r.part_parameter_template_list,title:i._({id:"+ueC+W"}),table:e,fields:l.useMemo(()=>({...n}),[n])}),[o,u]=l.useState(void 0),b=v({url:r.part_parameter_template_list,title:i._({id:"wnSG3S"}),table:e,fields:l.useMemo(()=>({...n}),[n]),initialData:o}),x=A({url:r.part_parameter_template_list,pk:o==null?void 0:o.pk,title:i._({id:"TEThbN"}),table:e,fields:l.useMemo(()=>({...n}),[n])}),_=R({url:r.part_parameter_template_list,pk:o==null?void 0:o.pk,title:i._({id:"BXI6AQ"}),table:e}),y=l.useCallback(j=>[S({hidden:!s.hasChangeRole(p.part),onClick:()=>{u(j),x.open()}}),B({hidden:!s.hasAddRole(p.part),onClick:()=>{u(j),b.open()}}),T({hidden:!s.hasDeleteRole(p.part),onClick:()=>{u(j),_.open()}})],[s]),L=l.useMemo(()=>[t.jsx(w,{tooltip:i._({id:"+ueC+W"}),onClick:()=>a.open(),hidden:!s.hasAddRole(p.part)},"add")],[s]);return t.jsxs(t.Fragment,{children:[a.modal,x.modal,b.modal,_.modal,t.jsx(M,{url:P(r.part_parameter_template_list),tableState:e,columns:d,props:{rowActions:y,tableFilters:h,tableActions:L,enableDownload:!0}})]})}function I({props:e}){const s=l.useMemo(()=>({field_type:"string",name:"value",required:!0,value:e.item.value,onValueChange:a=>{e.changeFn(e.idx,"value",a)}}),[e]),h=l.useMemo(()=>({field_type:"string",name:"label",required:!0,value:e.item.label,onValueChange:a=>{e.changeFn(e.idx,"label",a)}}),[e]),d=l.useMemo(()=>({field_type:"string",name:"description",required:!0,value:e.item.description,onValueChange:a=>{e.changeFn(e.idx,"description",a)}}),[e]),n=l.useMemo(()=>({field_type:"boolean",name:"active",required:!0,value:e.item.active,onValueChange:a=>{e.changeFn(e.idx,"active",a)}}),[e]);return t.jsxs(m.Tr,{children:[t.jsx(m.Td,{children:t.jsx(f,{fieldName:"value",fieldDefinition:s})}),t.jsx(m.Td,{children:t.jsx(f,{fieldName:"label",fieldDefinition:h})}),t.jsx(m.Td,{children:t.jsx(f,{fieldName:"description",fieldDefinition:d})}),t.jsx(m.Td,{children:t.jsx(f,{fieldName:"active",fieldDefinition:n})}),t.jsx(m.Td,{children:t.jsx(E,{onClick:()=>e.removeFn(e.idx)})})]},`table-row-${e.item.pk}`)}function g(){return{name:{},description:{},active:{},locked:{},source_plugin:{},source_string:{},choices:{label:i._({id:"ef6vAZ"}),description:i._({id:"f/qYPq"}),field_type:"table",value:[],headers:[{title:i._({id:"wMHvYH"})},{title:i._({id:"87a/t/"})},{title:i._({id:"Nu4oKW"})},{title:i._({id:"F6pfE9"})}],modelRenderer:e=>t.jsx(I,{props:e}),addRow:()=>({value:"",label:"",description:"",active:!0})}}}function H(){const e=F("selectionlist"),s=D(),h=l.useMemo(()=>[{accessor:"name",sortable:!0},q({sortable:!0}),k({accessor:"active"}),k({accessor:"locked"}),{accessor:"source_plugin",sortable:!0},{accessor:"source_string",sortable:!0},{accessor:"entry_count"}],[]),d=v({url:r.selectionlist_list,title:i._({id:"HCpwcG"}),fields:g(),table:e}),[n,a]=l.useState(void 0),o=A({url:r.selectionlist_list,pk:n,title:i._({id:"n7tNkj"}),fields:g(),table:e}),u=R({url:r.selectionlist_list,pk:n,title:i._({id:"fo+0WX"}),table:e}),b=l.useCallback(_=>[S({hidden:!s.hasChangeRole(p.admin),onClick:()=>{a(_.pk),o.open()}}),T({hidden:!s.hasDeleteRole(p.admin),onClick:()=>{a(_.pk),u.open()}})],[s]),x=l.useMemo(()=>[t.jsx(w,{onClick:()=>d.open(),tooltip:i._({id:"HCpwcG"})},"add-selection-list")],[]);return t.jsxs(t.Fragment,{children:[d.modal,o.modal,u.modal,t.jsx(M,{url:P(r.selectionlist_list),tableState:e,columns:h,props:{rowActions:b,tableActions:x,enableDownload:!0}})]})}function te(){return t.jsxs(c,{defaultValue:"parametertemplate",children:[t.jsxs(c.Item,{value:"parametertemplate",children:[t.jsx(c.Control,{children:t.jsx(C,{size:"lg",children:i._({id:"hAddRl"})})}),t.jsx(c.Panel,{children:t.jsx(N,{})})]},"parametertemplate"),t.jsxs(c.Item,{value:"selectionlist",children:[t.jsx(c.Control,{children:t.jsx(C,{size:"lg",children:i._({id:"2q2/qs"})})}),t.jsx(c.Panel,{children:t.jsx(H,{})})]},"selectionlist")]})}export{te as default};
//# sourceMappingURL=PartParameterPanel-BdWqc-Qq.js.map
