import{j as t,ae as b,z as k,G as n,h as u,F as v,r as p,bd as y,a5 as w}from"./vendor-C5fHLTDD.js";import{T as d}from"./BaseContext-BGXKB9QI.js";import{i as e,j as I,l as S,A as a,u as T}from"./index-DX4YmBvQ.js";import{I as F,S as A}from"./StylishText-CD9I8-X7.js";function L({id:r,data:s,isLoading:i}){const{classes:l}=F();return t.jsxs(b,{withBorder:!0,p:"xs",pos:"relative",children:[t.jsx(k,{visible:i,overlayBlur:2}),t.jsx(n,{position:"apart",children:t.jsx(u,{size:"xs",color:"dimmed",className:l.dashboardItemTitle,children:s.title})}),t.jsx(n,{align:"flex-end",spacing:"xs",mt:25,children:t.jsx(u,{className:l.dashboardItemValue,children:s.value})})]},r)}function D({id:r,error:s}){const i=(s==null?void 0:s.message)||(s==null?void 0:s.toString())||t.jsx(d,{id:"29VNqC"});return t.jsxs(t.Fragment,{children:[t.jsx("p",{children:t.jsx(d,{id:"nlJhkA"})}),i]})}function G({id:r,text:s,url:i,params:l,autoupdate:m=!0}){function _(){return I.get(`${S(i)}?search=&offset=0&limit=25`,{params:l}).then(j=>j.data)}const{isLoading:x,error:c,data:o,isFetching:h}=v({queryKey:[`dash_${r}`],queryFn:_,refetchOnWindowFocus:m}),[f,g]=p.useState({title:e._({id:"MHrjPM"}),value:"000"});return p.useEffect(()=>{o&&g({title:s,value:o.count})},[o]),c!=null?t.jsx(D,{id:r,error:c}):t.jsx("div",{children:t.jsx(L,{id:r,data:f,isLoading:x||h})},r)}const q=[{id:"starred-parts",text:e._({id:"5QTyaY"}),icon:"fa-bell",url:a.part_list,params:{starred:!0}},{id:"starred-categories",text:e._({id:"GuGbPw"}),icon:"fa-bell",url:a.category_list,params:{starred:!0}},{id:"latest-parts",text:e._({id:"LcKNFQ"}),icon:"fa-newspaper",url:a.part_list,params:{ordering:"-creation_date",limit:10}},{id:"bom-validation",text:e._({id:"eHUZsJ"}),icon:"fa-times-circle",url:a.part_list,params:{bom_valid:!1}},{id:"recently-updated-stock",text:e._({id:"ZopSbj"}),icon:"fa-clock",url:a.stock_item_list,params:{part_detail:!0,ordering:"-updated",limit:10}},{id:"low-stock",text:e._({id:"UgdO7s"}),icon:"fa-flag",url:a.part_list,params:{low_stock:!0}},{id:"depleted-stock",text:e._({id:"Onj2Pw"}),icon:"fa-times",url:a.part_list,params:{depleted_stock:!0}},{id:"stock-to-build",text:e._({id:"Iq/utX"}),icon:"fa-bullhorn",url:a.part_list,params:{stock_to_build:!0}},{id:"expired-stock",text:e._({id:"ZOsmSm"}),icon:"fa-calendar-times",url:a.stock_item_list,params:{expired:!0}},{id:"stale-stock",text:e._({id:"kc9cAF"}),icon:"fa-stopwatch",url:a.stock_item_list,params:{stale:!0,expired:!0}},{id:"build-pending",text:e._({id:"zLhIiS"}),icon:"fa-cogs",url:a.build_order_list,params:{active:!0}},{id:"build-overdue",text:e._({id:"UBWkDy"}),icon:"fa-calendar-times",url:a.build_order_list,params:{overdue:!0}},{id:"po-outstanding",text:e._({id:"WsHr9R"}),icon:"fa-sign-in-alt",url:a.purchase_order_list,params:{supplier_detail:!0,outstanding:!0}},{id:"po-overdue",text:e._({id:"fCNzWA"}),icon:"fa-calendar-times",url:a.purchase_order_list,params:{supplier_detail:!0,overdue:!0}},{id:"so-outstanding",text:e._({id:"gyZThB"}),icon:"fa-sign-out-alt",url:a.sales_order_list,params:{customer_detail:!0,outstanding:!0}},{id:"so-overdue",text:e._({id:"Gu8K8T"}),icon:"fa-calendar-times",url:a.sales_order_list,params:{customer_detail:!0,overdue:!0}},{id:"news",text:e._({id:"XzTq3p"}),icon:"fa-newspaper",url:a.news,params:{}}];function P(){const[r,s]=T(i=>[i.autoupdate,i.toggleAutoupdate]);return t.jsxs(t.Fragment,{children:[t.jsxs(n,{children:[t.jsx(A,{children:t.jsx(d,{id:"7p5kLi"})}),t.jsx(y,{checked:r,onChange:()=>s(),children:t.jsx(d,{id:"edpMcF"})})]}),t.jsx(u,{children:t.jsx(d,{id:"0s/I4H"})}),t.jsx(w,{cols:4,pt:"md",children:q.map(i=>t.jsx(G,{...i,autoupdate:r},i.id))})]})}export{P as default};
