import{ev as D,bQ as E,r as x,j as a,G as p,bT as T,bM as z,cA as I,ew as N,D as G,cG as L,S as M,bR as R,bV as F,bW as Q,i as m,d as U,ex as _,ah as $}from"./vendor-C9xuDR-n.js";import{h as q,r as B,n as K,e as O}from"./index-CjCZvRJF.js";import{u as V}from"./DesktopAppView-EZRUo9CM.js";import{k as W}from"./UseForm-D7tPXWOh.js";import{a as Y,S as H}from"./ThemeContext-s5vo4YrD.js";function ee({title:b,opened:l,onClose:j,selectedId:c,modelType:d,endpoint:w}){const k=V(),h=Y(),u=D(),t=E({enabled:l,queryKey:[d,l],queryFn:async()=>k.get(O(w),{data:{ordering:"level"}}).then(e=>e.data??[])}),C=x.useCallback((e,s)=>{const i=q(d,e.value);B(s)?K(i,h,s):(j(),h(i))},[d,h]),S=x.useMemo(()=>{var i,g;const e={},s=[];if(!t||!((i=t==null?void 0:t.data)!=null&&i.length))return[];for(let n=0;n<t.data.length;n++){const r={...t.data[n],children:[],label:a.jsxs(p,{gap:"xs",children:[a.jsx(W,{name:t.data[n].icon}),t.data[n].name]}),value:t.data[n].pk.toString(),selected:t.data[n].pk===c},v=r.pk,f=r.parent;if(f?(g=e[f])==null||g.children.push(r):s.push(r),e[v]=r,v===c){let o=e[r.parent];for(;o;)o.expanded=!0,o=e[o.parent]}}return s},[c,t.data]),A=x.useCallback(e=>a.jsxs(p,{p:3,justify:"left",wrap:"nowrap",onClick:()=>{e.hasChildren&&u.toggleExpanded(e.node.value)},children:[a.jsx(T,{w:3*e.level}),a.jsx(z,{size:"sm",variant:"transparent","aria-label":`nav-tree-toggle-${e.node.value}}`,children:e.hasChildren?e.expanded?a.jsx(I,{}):a.jsx(N,{}):null}),a.jsx(G,{onClick:s=>C(e.node,s),"aria-label":`nav-tree-item-${e.node.value}`,c:"var(--mantine-color-text)",children:e.node.label})]},e.node.value),[u]);return a.jsx(L,{opened:l,size:"md",position:"left",onClose:j,withCloseButton:!0,styles:{header:{width:"100%"},title:{width:"100%"}},title:a.jsxs(p,{justify:"left",p:"ms",gap:"md",wrap:"nowrap",children:[a.jsx($,{}),a.jsx(H,{size:"lg",children:b})]}),children:a.jsxs(M,{gap:"xs",children:[a.jsx(R,{}),a.jsx(F,{visible:t.isFetching||t.isLoading}),t.isError?a.jsx(Q,{color:"red",title:m._({id:"SlfejT"}),icon:a.jsx(U,{}),children:m._({id:"nY0zwD"})}):a.jsx(_,{data:S,tree:u,renderNode:A})]})})}export{ee as N};
//# sourceMappingURL=NavigationTree-DeFvtckG.js.map
