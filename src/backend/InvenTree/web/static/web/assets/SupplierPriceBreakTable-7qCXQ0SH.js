import{r as l,i as t,j as i,D as A,G as S,B as h}from"./vendor-c9tu_e1b.js";import{b as g,u as j,a as w,A as C}from"./UseForm-21BEg7Md.js";import{u as B,R as P,a as T,I as U}from"./InvenTreeTable-_nPJoCLK.js";import{b as R,e as p,A as n,U as c,h as q,m as M}from"./index-C-YqHYR0.js";import{a as y}from"./formatters-1-K9MQML.js";import{C as D}from"./ColumnRenderers-6-W27ey5.js";function E(e){var s;const r=((s=e==null?void 0:e.part_detail)==null?void 0:s.pack_quantity_native)??1;return Number.parseFloat(e.price)/r}function F(){return[{accessor:"supplier",title:t._({id:"PYTEl0"}),sortable:!0,switchable:!0,render:e=>i.jsx(D,{company:e.supplier_detail})},{accessor:"part_detail.SKU",title:t._({id:"y90mqQ"}),ordering:"SKU",sortable:!0,switchable:!1,render:e=>i.jsx(A,{href:q(M.supplierpart,e.part_detail.pk,!0),children:e.part_detail.SKU})},{accessor:"quantity",title:t._({id:"VbWX2u"}),sortable:!0,switchable:!1},{accessor:"price",title:t._({id:"kk1/TT"}),render:e=>y(e.price,{currency:e.price_currency}),sortable:!0,switchable:!1},{accessor:"unit_price",ordering:"price",title:t._({id:"vWelsN"}),sortable:!0,switchable:!0,render:e=>{var s;const r=(s=e.part_detail)==null?void 0:s.pack_quantity,a=y(E(e),{currency:e.price_currency});return i.jsxs(S,{justify:"space-between",gap:"xs",grow:!0,children:[i.jsx(h,{children:a}),r&&i.jsxs(h,{size:"xs",children:["[",r,"]"]})]})}}]}function L({supplierPart:e}){const r=B("supplierpricebreaks"),a=R(),s=l.useMemo(()=>F(),[]),u=l.useMemo(()=>({part:{hidden:!1,disabled:!0},quantity:{},price:{},price_currency:{}}),[]),[o,d]=l.useState(0),_=g({url:p(n.supplier_part_pricing_list),title:t._({id:"SXdWxL"}),fields:u,initialData:{part:e.pk,price_currency:e.supplier_detail.currency},table:r}),m=j({url:p(n.supplier_part_pricing_list),pk:o,title:t._({id:"l3gpbq"}),fields:u,table:r}),b=w({url:p(n.supplier_part_pricing_list),pk:o,title:t._({id:"ynVh1t"}),table:r}),f=l.useMemo(()=>[i.jsx(C,{tooltip:t._({id:"SXdWxL"}),onClick:()=>{_.open()},hidden:!a.hasAddRole(c.part)},"add-price-break")],[a]),x=l.useCallback(k=>[P({hidden:!a.hasChangeRole(c.purchase_order),onClick:()=>{d(k.pk),m.open()}}),T({hidden:!a.hasDeleteRole(c.purchase_order),onClick:()=>{d(k.pk),b.open()}})],[a]);return i.jsxs(i.Fragment,{children:[_.modal,m.modal,b.modal,i.jsx(U,{url:p(n.supplier_part_pricing_list),columns:s,tableState:r,props:{params:{part:e.pk,part_detail:!0,supplier_detail:!0},tableActions:f,rowActions:x}})]})}export{L as S,F as a,E as c};
//# sourceMappingURL=SupplierPriceBreakTable-7qCXQ0SH.js.map
