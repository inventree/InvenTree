import{r as l,i as s,j as e,B as T,L as f,S as h,bQ as r,G as j}from"./vendor-c9tu_e1b.js";import{u as _,a as b,I as g}from"./InvenTreeTable-_nPJoCLK.js";import{b as k,A as x,e as y}from"./index-C-YqHYR0.js";import{a as S,p as D,C as m}from"./ThemeContext-CVPHi9Q7.js";import{D as M}from"./DetailDrawer-BVL1Qt62.js";import{a as E}from"./UseForm-21BEg7Md.js";import{u as C}from"./UseInstance-Z-QOK6WR.js";import"./DesktopAppView-Bg1vO8uy.js";import"./index-D1sX3jYA.js";import"./ActionButton-Cn3lAMG1.js";import"./QRCode-4MaRh6JQ.js";import"./browser-oJrDmCBJ.js";function I({errorId:o}){var a;const{id:c}=D(),u=l.useMemo(()=>o??c,[o,c]),i=C({endpoint:x.error_report_list,pk:u,defaultValue:{},hasPrimaryKey:!0,refetchOnMount:!0}),t=l.useMemo(()=>i.instance||{},[i.instance]);return i.instanceQuery.isFetching||i.instanceQuery.isLoading?e.jsx(f,{}):e.jsx(h,{gap:"xs",children:e.jsx(r,{children:e.jsxs(r.Tbody,{children:[e.jsxs(r.Tr,{children:[e.jsx(r.Th,{children:s._({id:"xDAtGP"})}),e.jsx(r.Td,{children:t.info}),e.jsx(r.Td,{children:e.jsx(j,{justify:"right",children:e.jsx(m,{value:t.info,size:"sm"})})})]}),e.jsxs(r.Tr,{children:[e.jsx(r.Th,{children:s._({id:"8TMaZI"})}),e.jsx(r.Td,{children:t.when})]}),e.jsxs(r.Tr,{children:[e.jsx(r.Th,{children:s._({id:"I6gXOa"})}),e.jsx(r.Td,{children:t.path})]}),e.jsxs(r.Tr,{children:[e.jsx(r.Th,{children:s._({id:"g3fe3D"})}),e.jsx(r.Td,{colSpan:2,children:e.jsx(j,{justify:"right",children:e.jsx(m,{value:t.data,size:"sm"})})})]}),e.jsx(r.Tr,{children:e.jsx(r.Td,{colSpan:2,children:e.jsx(h,{gap:3,children:(a=t.data)==null?void 0:a.split(`
`).map((d,p)=>e.jsx(T,{size:"xs",children:d},`error-line-${p}`))})})})]})})})}function O(){const o=_("error-report"),c=k(),u=S(),i=l.useMemo(()=>[{accessor:"when",title:s._({id:"1ZF9KQ"}),sortable:!0},{accessor:"path",title:s._({id:"I6gXOa"}),sortable:!0},{accessor:"info",title:s._({id:"pao9M8"})}],[]),[t,a]=l.useState({}),d=E({url:x.error_report_list,pk:t.pk,title:s._({id:"LKUVto"}),preFormContent:e.jsx(T,{c:"red",children:s._({id:"crTsip"})}),successMessage:s._({id:"lYkkju"}),table:o}),p=l.useCallback(n=>[b({onClick:()=>{a(n),d.open()}})],[]);return e.jsxs(e.Fragment,{children:[d.modal,e.jsx(M,{title:s._({id:"7Jw/XW"}),size:"xl",renderContent:n=>{if(n)return e.jsx(I,{errorId:t.pk})}}),e.jsx(g,{url:y(x.error_report_list),tableState:o,columns:i,props:{enableBulkDelete:c.isStaff(),enableSelection:!0,rowActions:p,onRowClick:n=>{a(n),u(`${n.pk}/`)}}})]})}export{O as default};
//# sourceMappingURL=ErrorTable-DVqWOlnb.js.map
