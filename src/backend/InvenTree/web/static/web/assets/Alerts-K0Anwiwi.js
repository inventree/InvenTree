import{j as t,i as s,u as g,r as c,cy as n,bL as p,bM as _,d as h,bW as x,S as f,G as S}from"./vendor-C9xuDR-n.js";import{d as b}from"./links-Blx29b59.js";import{b as E,c as k,f as I}from"./index-CjCZvRJF.js";function w(){const o=E(),[i]=k(g(e=>[e.server])),a=I(),[d,l]=c.useState([]),r=c.useMemo(()=>{const e=[];return i!=null&&i.debug_mode&&e.push({key:"debug",title:s._({id:"gri3Lv"}),code:"INVE-W4",message:s._({id:"+6qJ+8"})}),i!=null&&i.worker_running||e.push({key:"worker",title:s._({id:"/XqPnF"}),code:"INVE-W5",message:s._({id:"Kz2rIR"})}),i!=null&&i.email_configured||e.push({key:"email",title:s._({id:"K4BV4V"}),code:"INVE-W7",message:s._({id:"gGrqca"})}),a.isSet("SERVER_RESTART_REQUIRED")&&e.push({key:"restart",title:s._({id:"Bb2P0T"}),code:"INVE-W6",message:s._({id:"ewxV3O"})}),(Number.parseInt(a.getSetting("_PENDING_MIGRATIONS"))??0)>0&&e.push({key:"migrations",title:s._({id:"2uXaRL"}),code:"INVE-W8",message:s._({id:"5aV8JX"})}),e.filter(m=>!d.includes(m.key))},[i,d,a]),u=c.useMemo(()=>r.some(e=>e.error),[r]);return o.isStaff()&&r.length>0?t.jsxs(n,{withinPortal:!0,position:"bottom-end",children:[t.jsx(n.Target,{children:t.jsx(p,{position:"bottom-end",label:s._({id:"s4BX3A"}),children:t.jsx(_,{variant:"transparent","aria-label":"open-alerts",color:u?"red":"orange",children:t.jsx(h,{})})})}),t.jsx(n.Dropdown,{children:r.map(e=>t.jsx(n.Item,{children:t.jsx(x,{withCloseButton:!0,color:e.error?"red":"orange",title:t.jsxs(S,{gap:"xs",children:[e.code&&`${e.code}: `,e.title]}),onClose:()=>l([...d,e.key]),children:t.jsxs(f,{gap:"xs",children:[e.message,e.code&&j(e.code)]})})},`alert-item-${e.key}`))})]}):null}function j(o){return t.jsx("a",{href:`${b.errorcodes}#${o.toLowerCase()}`,target:"_blank",rel:"noreferrer",children:s._({id:"XTZa21",values:{code:o}})})}export{w as A,j as e};
//# sourceMappingURL=Alerts-K0Anwiwi.js.map
